<!DOCTYPE html>
<html ng-app="ballaratParking">
<head>
	<title>Ballarat Parking</title>
	<meta name="description" content="Simple Map">
	<meta name="keywords" content="ng-map,AngularJS,center">
	<meta name="viewport" content="initial-scale=3.0, user-scalable=no">
	<script src="http://maps.google.com/maps/api/js"></script>
	<script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular.min.js"></script>
	<script src="https://rawgit.com/allenhwkim/angularjs-google-maps/master/build/scripts/ng-map.min.js"></script>
	<style type="text/css">
		html, body {
			height: 100%;
		}
		ng-map {
			height: 80%;
		}
		.parkInfomation {
			height: 20%;
		}
	</style>

	<script>
	
	var app=angular.module('ballaratParking', ['ngMap']);
	app.controller('getParkInfo', function(NgMap) {
		var parkInfo = this;
		NgMap.getMap().then(function(map) {
			parkInfo.map = map;
		})

		parkInfo.onClick = function(event) {
			parkInfo.attributes = event.feature.H;
		};
	});

	</script>

</head>

<body ng-controller="getParkInfo as parkInfo">

	<ng-map center="[-37.561960, 143.855765]" zoom="17">
		<map-data load-geo-json=
			"http://data.gov.au/geoserver/ballarat-parking-machines/wfs?request=GetFeature&typeName=919da8f8_0aa6_4f90_9d21_45331e4bea7c&outputFormat=json"
		</map-data>	
		<map-data on-click="parkInfo.onClick()" load-geo-json=
			"http://data.gov.au/geoserver/ballarat-car-parking-areas/wfs?request=GetFeature&typeName=eb670c53_1fbc_4ca5_9ffd_4e336fdb0763&outputFormat=json"
		</map-data> 
	</ng-map>
	<div id=parkInformation">
		<h2>Park Information</h2>
		{{parkInfo.attributes}}
	</div>
</body>

</html>

